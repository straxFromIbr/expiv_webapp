<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mask test</title>
</head>

<body style="user-select:none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;">
    <main>
        <p id='textarea' style="color:black; background-color:white;"> </p>
        <input type="button" value="change mask" onclick="buttonClick()">
        <a href='/account'>再ログイン</a>
    </main>
</body>



<script>
    let text_and_filter_list = {{text_and_filter_list|safe}}
    let text_list = {{wakati_text|safe}};
    let filter_idx = {{filter_idx|safe}};
    let mask_idx = 0;
    const pre = '<span style="color: black; background-color: black;">';
    const post = '</span>';
    const results = document.getElementById('textarea');
    const idxarea = document.getElementById('idxarea');
    buttonClick()
    function buttonClick() {
        mask_idx = filter_idx[Math.floor(Math.random() * filter_idx.length)]
        var result = '';
        for (var idx = 0; idx < text_list.length; idx += 1) {
            if (idx == mask_idx) {
                result += pre + text_list[idx] + post;
            } else {
                result += text_list[idx];
            }
        }
        results.innerHTML = result;
    }
</script>

</html>